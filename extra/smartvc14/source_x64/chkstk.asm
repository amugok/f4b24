
PUBLIC __chkstk
PUBLIC __alloca_probe

_TEXT	SEGMENT

__chkstk:
__alloca_probe:

	PUSH	R10
	PUSH	R11
	;SUB	RSP,10H
	;MOV	QWORD PTR [RSP],R10
	;MOV	QWORD PTR [RSP+8],R11
	XOR	R11,R11
	LEA	R10,[RSP+18H]
	SUB	R10,RAX
	CMOVB	R10,R11
	MOV	R11,QWORD PTR GS:[10H]
	CMP	R10,R11
	JAE	SHORT SKIP
	AND	R10W,0F000H
@@:
	LEA	R11,[R11-1000H]
	MOV	BYTE PTR [R11],0
	CMP	R10,R11
	JNE	SHORT @B
SKIP:
	POP	R11
	POP	R10
	;MOV	R10,QWORD PTR [RSP]
	;MOV	R11,QWORD PTR [RSP+8]
	;ADD	RSP,10H
	RET

_TEXT	ENDS
END
